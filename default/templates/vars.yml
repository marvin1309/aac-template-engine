default_internal_service_dns_name: "bookstack-test"
default_secured_service_dns_name: "bookstack-test"
default_secured_service_domain: "int.fam-feser.de"
default_expose_service_domain: "svc.fam-feser.de"

service_name: grafana
image: grafana/grafana-oss:latest
container_name: grafana
hostname: grafana
container_port: 3000
port_grafana: 3500
restart_policy: "always"
dns_name: grafana.int.fam-feser.de

traefik: true
expose_service: false
secure_service: true

volume_dirs:
  - data

extra_env_vars:
  GF_SECURITY_ADMIN_USER: admin
  GF_SECURITY_ADMIN_PASSWORD: admin
  GF_USERS_ALLOW_SIGN_UP: "true"
  GF_SERVER_ROOT_URL: https://grafana.int.fam-feser.de
  GF_AUTH_GENERIC_OAUTH_ENABLED: "true"
  GF_AUTH_GENERIC_OAUTH_NAME: "authentik"
  GF_AUTH_GENERIC_OAUTH_CLIENT_ID: "PAg8mewl0wdwygeoJOUKhP2Xdbs2bV4gzJpa4Zo9"
  GF_AUTH_GENERIC_OAUTH_CLIENT_SECRET: "vbF2dU2qyxix7FXZ0GIHkhxzaP6LENqcaad5teFvPVJ2YmaxnMrjz5wraL3XwMWwd4gpoKWDEcF9LBHAktp0aZApzNS96MICkRIwyvOi08UOIFSbsfvmmPAqEWx3aUbW"
  GF_AUTH_GENERIC_OAUTH_SCOPES: "openid profile email"
  GF_AUTH_GENERIC_OAUTH_AUTH_URL: "https://auth.int.fam-feser.de/application/o/authorize/"
  GF_AUTH_GENERIC_OAUTH_TOKEN_URL: "https://auth.int.fam-feser.de/application/o/token/"
  GF_AUTH_GENERIC_OAUTH_API_URL: "https://auth.int.fam-feser.de/application/o/userinfo/"
  GF_AUTH_SIGNOUT_REDIRECT_URL: "https://auth.int.fam-feser.de/application/o/grafana-titan/end-session/"
  GF_AUTH_OAUTH_AUTO_LOGIN: "true"
  GF_AUTH_GENERIC_OAUTH_ROLE_ATTRIBUTE_PATH: "contains(groups, 'Grafana Admins') && 'Admin' || contains(groups, 'Grafana Editors') && 'Editor' || 'Viewer'"
