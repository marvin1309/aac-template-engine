# .gitlab-ci.yml

stages:
  - test

yaml-syntax-check:
  stage: test
  image: python:3.11-slim # A small, efficient Docker image with Python

  before_script:
    - pip install PyYAML # Installs the necessary Python library for parsing YAML

  script:
    - echo "ðŸ”Ž Checking syntax of all .yml and .yaml files..."
    # Finds all files ending in .yml or .yaml and passes them to the Python command.
    # The `find` command ensures files in subdirectories are also checked.
    # The `xargs` command executes the syntax check for each file found.
    - find . -type f \( -name "*.yml" -o -name "*.yaml" \) -print0 | xargs -0 -n 1 python -c "import yaml, sys; print(f'-- Checking: {sys.argv[1]}'); yaml.safe_load(open(sys.argv[1]))"
    - echo "âœ… Syntax check passed for all YAML files."