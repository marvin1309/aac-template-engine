{# --- Main Service Environment Variables --- #}
{# Setze Standardwerte f√ºr PUID/PGID und rendere dann alle anderen Variablen #}
PUID="{{ deployments.docker_compose.dot_env.PUID | default(1000) }}"
PGID="{{ deployments.docker_compose.dot_env.PGID | default(1000) }}"
{% for key, value in deployments.docker_compose.dot_env.items() if key not in ['PUID', 'PGID'] %}
{{ key }}="{{ value | string }}"
{% endfor %}

{# --- Dependencies Environment Variables (non-secrets) --- #}
{%- if dependencies is defined and dependencies %}
{%- for dep_name, dep_config in dependencies.items() %}
{%- if dep_config.environment is defined %}
{%- for key, value in dep_config.environment.items() if 'secret' not in value and 'password' not in key|lower and 'token' not in key|lower %}
{{ key }}="{{ value | string }}"
{% endfor %}
{%- endif %}
{%- endfor %}
{%- endif %}